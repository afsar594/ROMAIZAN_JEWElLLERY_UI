<app-page-header [title]='title'></app-page-header>
<p-toolbar>
    <div class="ui-toolbar-group-left">
        <!-- <button pButton type="button" label="Edit" icon="fa fa-pencil" class="ui-button-success"></button> -->
        <button pButton type="button" label="Save" (click)="onSave()" icon="fa fa-floppy-o"
            class="ui-button-success"></button>
        <button pButton type="button" (click)="showListModal = true" label="List" icon="fa fa-list"
            class="ui-button-info"></button>
        <button pButton (click)="onCancel()" type="button" class="ui-button-danger" label="Cancel"
            icon="fa fa-close"></button>
    </div>
</p-toolbar>
<br><br>

<div class="card card-w-title" [formGroup]='GAPForm'>
    <div class="p-grid" style="padding-left: 10%;">
        <div class="p-col-1">
            <label>Policy:</label>
        </div>
        <div class="p-col-7">
            <input type="text" pInputText style="width: 100%;" formControlName="policyName" placeholder="--Policy--" />
            <div class="error" *ngIf="submitted && f.policyName.errors">
                <span *ngIf="submitted && f.policyName.errors && f.policyName.errors.required">Policy is
                    Required</span>
            </div>
        </div>
    </div>
</div>
<div class="card card-w-title">
    <button pButton (click)="onSaveDetail()" [disabled]="!isBtnEnable" type="button" label="Save" icon="fa fa-floppy-o"
        class="ui-button-success"></button>
    <p-table [paginator]="false" [rows]="10" [showCurrentPageReport]="true" [tableStyle]="{ 'min-width': '50rem' }"
        [value]="this.transactionApiService.SalaryHeadsArray" styleClass="p-datatable-striped"
        [tableStyle]="{'min-width': '50rem'}">
        <ng-template pTemplate="header">
            <tr>
                <th>Select</th>
                <th>Salary Head</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product>
            <tr>
                <td> <p-checkbox [binary]="true" [disabled]="!isBtnEnable" (onChange)="ChangeSelect(product.shid)"
                        [(ngModel)]="product.isSelect" [style]="{width:'100%'}" inputId="ny"></p-checkbox></td>
                <td>{{product.displayName}}</td>
            </tr>
        </ng-template>
    </p-table>
</div>



<p-dialog header="Gratuity Amount Policy" [(visible)]="showListModal" [style]="{width: '50vw'}" [baseZIndex]="10000">
    <p-table [styleClass]="'p-datatable-sm'" [value]="this.masterApiService.HrGratAmtPolicyMaster"
        styleClass="p-datatable-striped" [tableStyle]="{'min-width': '50rem'}">
        <ng-template pTemplate="header">
            <tr>
                <th>ID</th>
                <th>Policy Name</th>
                <th>Details</th>
                <th>Delete</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-staff>
            <tr style="cursor:pointer">
                <td>{{staff.polId}}</td>
                <td>{{staff.policyName}}</td>
                <td> <button pButton type="button" (click)="ViewDetails(staff.polId)" label="Details" icon="fa fa-eye"
                        class="ui-button-info"></button></td>
                <td> <button (click)="onDeleteMaster(staff)" pButton type="button" icon="pi pi-trash"
                        iconPos="left"></button></td>
            </tr>
        </ng-template>
    </p-table>
    <ng-template pTemplate="footer">
        <p-button icon="pi pi-times" (click)="showListModal=false" class="p-button-text" label="Close"></p-button>
    </ng-template>
</p-dialog>

<p-dialog header="Gratuity Amount Policy Details" [(visible)]="viewDetailModal" [style]="{width: '50vw'}"
    [baseZIndex]="10000">
    <p-table [styleClass]="'p-datatable-sm'" [value]="this.detailData" styleClass="p-datatable-striped"
        [tableStyle]="{'min-width': '50rem'}">
        <ng-template pTemplate="header">
            <tr>
                <th>ID</th>
                <th>Policy Name</th>
                <th>Salary Head</th>
                <th>Delete</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-staff>
            <tr style="cursor:pointer">
                <td>{{staff.detPolId}}</td>
                <td>{{getpolName(staff.polId)}}</td>
                <td>{{getsalaryHeadName(staff.salHeadId)}}</td>
                <td> <button (click)="onDeleteDetail(staff)" pButton type="button" icon="pi pi-trash"
                        iconPos="left"></button></td>
            </tr>
        </ng-template>
    </p-table>
    <ng-template pTemplate="footer">
        <p-button icon="pi pi-times" (click)="viewDetailModal=false" class="p-button-text" label="Close"></p-button>
    </ng-template>
</p-dialog>